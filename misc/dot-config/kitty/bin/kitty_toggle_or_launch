#!/bin/bash
#

input=$1
shift
if [[ "$input" == *":"* ]]; then
  IFS=':' read -r index title <<< "$input"
else
  index=""
  title="$input"
fi

if (kitten @ ls -m title:${title} &>/dev/null); then
  kitten @ focus-window -m title:${title}
elif [[ -n $index ]]; then
  kitten @ launch -m index:$((index-1)) --title=${title} "$@"
  kitten @ focus-window -m title:${title}
else
  kitten @ launch --type=tab --title=${title} "$@"
fi
